{"version":3,"file":"registerDatePicker.cjs.js","sources":["../src/registerDatePicker.tsx"],"sourcesContent":["import { DatePicker } from \"antd\";\nimport dayjs, { Dayjs } from \"dayjs\";\nimport React from \"react\";\nimport { capitalize, Registerable, registerComponentHelper } from \"./utils\";\n\n/**\n * onChangeIsoString uses ISO strings rather than dayjs.\n *\n */\nexport function AntdDatePicker(\n  props: Omit<React.ComponentProps<typeof DatePicker>, \"value\" | \"onChange\"> & {\n    onChange?: (value: string | null) => void;\n    value?: Dayjs | string | null;\n    // Not sure why this is missing from DatePicker props!\n    showTime?: boolean;\n    popupScopeClassName?: string;\n  }\n) {\n  const { picker, popupScopeClassName, ...rest } = props;\n\n  const css = `\n\n  @media(max-width: 500px) {\n    .ant-picker-dropdown {\n      top: 20px !important;\n      left: 10px !important;\n      right: 10px !important;\n      max-height: 95vh;\n      position: fixed;\n      overflow-y: scroll;\n    }\n\n    .ant-picker-panel-layout {\n      flex-direction: column;\n    }\n\n    .ant-picker-presets {\n      min-height: 50px;\n      min-width: 100%;\n    }\n\n    .ant-picker-presets > ul {\n      overflow-y: hidden;\n      overflow-x: auto;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-wrap: wrap;\n      flex-direction: column;\n    }\n\n    .ant-picker-presets > ul > li {\n      margin: 0 !important;\n    }\n\n    .ant-picker-panel-container {\n      width: 300px;\n    }\n\n    .ant-picker-datetime-panel {\n      flex-direction: column;\n    }\n\n    .ant-picker-header-view {\n      line-height: unset !important;\n    }\n\n    .ant-picker-content {\n      height: unset !important;\n    }\n\n    .ant-picker-time-panel-column {\n      height: 100px;\n    }\n\n    .ant-picker-time-panel-column::after {\n      height: 0px !important;\n    }\n\n    .ant-picker-time-panel-column::after {\n      display: none;\n    }\n  }`;\n\n  return (\n    <>\n      <DatePicker\n        {...rest}\n        picker={picker as any}\n        value={\n          props.value === undefined\n            ? undefined\n            : !props.value\n            ? null\n            : dayjs(props.value)\n        }\n        defaultValue={\n          props.defaultValue === undefined\n            ? undefined\n            : dayjs(props.defaultValue)\n        }\n        popupClassName={popupScopeClassName}\n        // dateString isn't a valid ISO string, and value is a dayjs object.\n        onChange={(value, _dateString) => {\n          props.onChange?.(value !== null ? value.toISOString() : null);\n        }}\n      />\n      <style dangerouslySetInnerHTML={{ __html: css }} />\n    </>\n  );\n}\n\nexport const datePickerComponentName = \"plasmic-antd5-date-picker\";\n\nexport const datePickerHelpers = {\n  states: {\n    value: {\n      onChangeArgsToValue: (value: string) => (value ? value : undefined),\n      hidden: (ps: any) => !!ps.__plasmicFormField,\n    },\n  },\n};\n\nexport function registerDatePicker(loader?: Registerable) {\n  registerComponentHelper(loader, AntdDatePicker, {\n    name: datePickerComponentName,\n    displayName: \"Date/Time Picker\",\n    props: {\n      value: {\n        type: \"dateString\",\n        editOnly: true,\n        uncontrolledProp: \"defaultValue\",\n        description:\n          \"The current date/time as an ISO string, Date object, or dayjs object\",\n        hidden: (ps: any) => !!ps.__plasmicFormField,\n      },\n      disabled: {\n        type: \"boolean\",\n        defaultValueHint: false,\n      },\n      autoFocus: {\n        type: \"boolean\",\n        description: \"Focus when component is rendered\",\n        defaultValueHint: false,\n        advanced: true,\n      },\n      onChange: {\n        type: \"eventHandler\",\n        argTypes: [{ name: \"value\", type: \"string\" }],\n      },\n      picker: {\n        type: \"choice\",\n        options: [\"date\", \"week\", \"month\", \"quarter\", \"year\"].map((value) => ({\n          value,\n          label: capitalize(value),\n        })),\n        defaultValueHint: \"date\",\n      },\n      popupScopeClassName: {\n        type: \"styleScopeClass\",\n        scopeName: \"datePickerPopup\",\n      } as any,\n      popupClassName: {\n        type: \"class\",\n        displayName: \"Popup container\",\n        selectors: [\n          {\n            selector: \":datePickerPopup .ant-picker-panel-container\",\n            label: \"Base\",\n          },\n        ],\n      },\n      popupHeaderClassName: {\n        type: \"class\",\n        displayName: \"Popup header\",\n        selectors: [\n          {\n            selector: \":datePickerPopup .ant-picker-header\",\n            label: \"Base\",\n          },\n        ],\n      },\n      popupBodyClassName: {\n        type: \"class\",\n        displayName: \"Popup body\",\n        selectors: [\n          {\n            selector: \":datePickerPopup .ant-picker-body\",\n            label: \"Base\",\n          },\n        ],\n      },\n      popupFooterClassName: {\n        type: \"class\",\n        displayName: \"Popup footer\",\n        selectors: [\n          {\n            selector: \":datePickerPopup .ant-picker-footer\",\n            label: \"Base\",\n          },\n        ],\n      },\n      showTime: {\n        type: \"boolean\",\n        description: \"Enable time selection\",\n      },\n      bordered: {\n        type: \"boolean\",\n        advanced: true,\n      },\n      // TODO - see how it works with plasmic-rich-components\n      // format: {\n      //   advanced: true\n      // },\n      showNow: {\n        type: \"boolean\",\n        advanced: true,\n        description: 'Whether to show the \"Now\" button',\n        defaultValueHint: true,\n        hidden: (ps: any) => !ps.showTime,\n      },\n      showToday: {\n        type: \"boolean\",\n        advanced: true,\n        description: 'Whether to show the \"Today\" button',\n        defaultValueHint: true,\n        hidden: (ps: any) => ps.showTime,\n      },\n      // disabledDate: {\n      //   type: \"function\",\n      //   advanced: true,\n      //   description: \"Dates to disable\",\n      // },\n      // disabledTime: {\n      //   type: \"function\",\n      //   advanced: true,\n      //   description: \"Times to disable\",\n      // },\n      allowClear: {\n        type: \"boolean\",\n        advanced: true,\n        description: \"Whether to show the clear button\",\n      },\n    },\n    states: {\n      value: {\n        type: \"writable\",\n        valueProp: \"value\",\n        onChangeProp: \"onChange\",\n        variableType: \"text\",\n        ...datePickerHelpers.states.value,\n      },\n    },\n    componentHelpers: {\n      helpers: datePickerHelpers,\n      importName: \"datePickerHelpers\",\n      importPath: \"@plasmicpkgs/antd5/skinny/registerDatePicker\",\n    },\n    importPath: \"@plasmicpkgs/antd5/skinny/registerDatePicker\",\n    importName: \"AntdDatePicker\",\n  });\n}\n"],"names":["React","DatePicker","dayjs","_a","registerComponentHelper","capitalize"],"mappings":"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"}