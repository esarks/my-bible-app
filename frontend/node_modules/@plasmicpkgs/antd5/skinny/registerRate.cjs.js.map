{"version":3,"file":"registerRate.cjs.js","sources":["../src/registerRate.tsx"],"sourcesContent":["import React, { ReactElement, useMemo } from \"react\";\nimport { Registerable, registerComponentHelper } from \"./utils\";\nimport { Rate } from \"antd\";\n\nexport function AntdRate(\n  props: Omit<React.ComponentProps<typeof Rate>, \"tooltips\"> & {\n    tooltips?: { label: string }[];\n    multiCharacter?: boolean;\n    symbols?: React.ReactElement;\n  }\n) {\n  const { character, count, tooltips, multiCharacter, symbols, ...rest } =\n    props;\n\n  const symbolsProp: ReactElement[] = useMemo(\n    () =>\n      (Array.isArray(symbols?.props?.children)\n        ? symbols?.props?.children\n        : [symbols]\n      )\n        ?.filter((c: any) => React.isValidElement(c))\n        .map((c: ReactElement) => <>{c}</>) || [],\n    [symbols]\n  );\n  const countProp = useMemo(() => {\n    if (!multiCharacter) return count;\n    return symbolsProp?.length;\n  }, [count, multiCharacter, symbolsProp?.length]);\n\n  const characterProp = useMemo(() => {\n    if (!multiCharacter) return character || undefined;\n    return symbolsProp?.length\n      ? ({ index }: any) => symbolsProp[index]\n      : character || undefined;\n  }, [character, multiCharacter, symbolsProp]);\n\n  return (\n    <Rate\n      tooltips={tooltips?.map((t) => t?.label)}\n      count={countProp}\n      character={characterProp}\n      {...rest}\n    />\n  );\n}\n\nexport const rateComponentName = \"plasmic-antd5-rate\";\n\nexport function registerRate(loader?: Registerable) {\n  registerComponentHelper(loader, AntdRate, {\n    name: rateComponentName,\n    displayName: \"Rate\",\n    props: {\n      allowClear: {\n        type: \"boolean\",\n        advanced: true,\n        defaultValueHint: true,\n        description: \"Clear the rating when the user clicks again\",\n      },\n      allowHalf: {\n        type: \"boolean\",\n        advanced: true,\n        defaultValueHint: false,\n        description: \"Allow fractional rating.\",\n      },\n      autoFocus: {\n        type: \"boolean\",\n        description: \"Focus when component is rendered\",\n        defaultValueHint: false,\n        advanced: true,\n      },\n      character: {\n        type: \"slot\",\n        displayName: \"Symbol\",\n        hidePlaceholder: true,\n        hidden: (ps) => Boolean(ps.multiCharacter),\n      },\n      multiCharacter: {\n        type: \"boolean\",\n        displayName: \"Multi Symbol\",\n        description:\n          \"Allow different symbols for rating. (You can add these symbols in the component slots if this is enabled)\",\n        advanced: true,\n      },\n      symbols: {\n        type: \"slot\",\n        displayName: \"Symbols\",\n        hidePlaceholder: true,\n        defaultValue: [\"1\", \"2\", \"3\", \"4\", \"5\"],\n        hidden: (ps) => !ps.multiCharacter,\n      },\n      count: {\n        type: \"number\",\n        description: \"Rating count\",\n        defaultValueHint: 5,\n        advanced: true,\n        hidden: (ps) => Boolean(ps.multiCharacter),\n      },\n      value: {\n        type: \"number\",\n        editOnly: true,\n        uncontrolledProp: \"defaultValue\",\n        description: \"Default rating\",\n        defaultValueHint: 0,\n      },\n      disabled: {\n        type: \"boolean\",\n        description: \"Read-only rating\",\n        defaultValueHint: false,\n      },\n      tooltips: {\n        type: \"array\",\n        description: \"Rating labels\",\n        displayName: \"Labels\",\n        advanced: true,\n        hidden: (ps) => !ps.count,\n        itemType: {\n          type: \"object\",\n          fields: {\n            label: \"string\",\n          },\n          nameFunc: (value) => value.label,\n        },\n        validator: (value, ps) => {\n          if (!ps.count) return true;\n          if (!Array.isArray(value) || value.length === 0) return true;\n          if (value.length < ps.count)\n            return `You need ${ps.count - value.length} more labels`;\n          if (value.length > ps.count)\n            return \"You have too many labels. Some labels will not be used\";\n          return true;\n        },\n      },\n      onChange: {\n        type: \"eventHandler\",\n        advanced: true,\n        argTypes: [{ name: \"value\", type: \"number\" }],\n      },\n      onBlur: {\n        type: \"eventHandler\",\n        advanced: true,\n        argTypes: [],\n      },\n      onFocus: {\n        type: \"eventHandler\",\n        advanced: true,\n        argTypes: [],\n      },\n      onHoverChange: {\n        type: \"eventHandler\",\n        advanced: true,\n        description: \"Callback when an item is hovered\",\n        argTypes: [],\n      },\n      onKeyDown: {\n        type: \"eventHandler\",\n        advanced: true,\n        argTypes: [{ name: \"event\", type: \"object\" }],\n      },\n    },\n    states: {\n      value: {\n        type: \"writable\",\n        valueProp: \"value\",\n        onChangeProp: \"onChange\",\n        variableType: \"number\",\n      },\n    },\n\n    importPath: \"@plasmicpkgs/antd5/skinny/registerRate\",\n    importName: \"AntdRate\",\n  });\n}\n"],"names":["useMemo","_a","React","Rate","registerComponentHelper"],"mappings":"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"}