{"version":3,"file":"contexts-4c7952c1.esm.js","sources":["../src/form/contexts.ts"],"sourcesContent":["import { Form, type FormInstance, type FormItemProps } from \"antd\";\nimport React from \"react\";\n\nexport const PathContext = React.createContext<{\n  relativePath: (string | number)[]; // used for form.items inside a form.list\n  fullPath: (string | number)[];\n}>({ relativePath: [], fullPath: [] });\n\nexport const useFormItemRelativeName = (name: FormItemProps[\"name\"]) => {\n  const pathCtx = React.useContext(PathContext);\n  return typeof name === \"object\"\n    ? [...pathCtx.relativePath, ...name]\n    : typeof name === \"string\"\n    ? [...pathCtx.relativePath, name]\n    : undefined;\n};\n\nexport const useFormItemFullName = (name: FormItemProps[\"name\"]) => {\n  const pathCtx = React.useContext(PathContext);\n  return typeof name === \"object\"\n    ? [...pathCtx.fullPath, ...name]\n    : typeof name === \"string\"\n    ? [...pathCtx.fullPath, name]\n    : undefined;\n};\n\nexport function useFormInstanceMaybe(): FormInstance<any> | undefined {\n  return Form.useFormInstance();\n}\n\nexport interface FieldEntity {\n  fullPath: (string | number)[];\n  name: string | number | undefined;\n  preserve: boolean;\n}\n\n/**\n * - registeredFields: current mounted form fields\n * - preservedRegisteredFields: all fields that were registered and were marked as NOT preserve\n */\nexport interface InternalFieldCtx {\n  registeredFields: FieldEntity[];\n  preservedRegisteredFields: FieldEntity[];\n}\n\nexport interface CommonFormControlContextData {\n  formInstance?: FormInstance<any>;\n  layout?: FormLayoutContextValue;\n  internalFieldCtx?: InternalFieldCtx;\n}\n\nexport interface InternalFormInstanceContext\n  extends CommonFormControlContextData {\n  fireOnValuesChange: () => void;\n  forceRemount: () => void;\n  registerField: (fieldEntity: FieldEntity) => () => void;\n  internalFieldCtx: InternalFieldCtx;\n  initialValues: Record<string, any>;\n}\n\nexport const InternalFormInstanceContext = React.createContext<\n  InternalFormInstanceContext | undefined\n>(undefined);\n\nexport interface FormLayoutContextValue {\n  layout: React.ComponentProps<typeof Form>[\"layout\"];\n  labelSpan?: number;\n}\n\nexport const FormLayoutContext = React.createContext<\n  FormLayoutContextValue | undefined\n>(undefined);\n"],"names":[],"mappings":";;;AAGa,MAAA,WAAA,GAAc,KAAM,CAAA,aAAA,CAG9B,EAAE,YAAA,EAAc,EAAI,EAAA,QAAA,EAAU,EAAC,EAAG,EAAA;AAExB,MAAA,uBAAA,GAA0B,CAAC,IAAgC,KAAA;AACtE,EAAM,MAAA,OAAA,GAAU,KAAM,CAAA,UAAA,CAAW,WAAW,CAAA,CAAA;AAC5C,EAAA,OAAO,OAAO,IAAS,KAAA,QAAA,GACnB,CAAC,GAAG,OAAA,CAAQ,cAAc,GAAG,IAAI,CACjC,GAAA,OAAO,SAAS,QAChB,GAAA,CAAC,GAAG,OAAQ,CAAA,YAAA,EAAc,IAAI,CAC9B,GAAA,KAAA,CAAA,CAAA;AACN,EAAA;AAEa,MAAA,mBAAA,GAAsB,CAAC,IAAgC,KAAA;AAClE,EAAM,MAAA,OAAA,GAAU,KAAM,CAAA,UAAA,CAAW,WAAW,CAAA,CAAA;AAC5C,EAAA,OAAO,OAAO,IAAS,KAAA,QAAA,GACnB,CAAC,GAAG,OAAA,CAAQ,UAAU,GAAG,IAAI,CAC7B,GAAA,OAAO,SAAS,QAChB,GAAA,CAAC,GAAG,OAAQ,CAAA,QAAA,EAAU,IAAI,CAC1B,GAAA,KAAA,CAAA,CAAA;AACN,EAAA;AAEO,SAAS,oBAAsD,GAAA;AACpE,EAAA,OAAO,KAAK,eAAgB,EAAA,CAAA;AAC9B,CAAA;AAgCa,MAAA,2BAAA,GAA8B,KAAM,CAAA,aAAA,CAE/C,KAAS,CAAA,EAAA;AAOE,MAAA,iBAAA,GAAoB,KAAM,CAAA,aAAA,CAErC,KAAS,CAAA;;;;"}